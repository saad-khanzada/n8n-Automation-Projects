{
  "name": "gamil Agent",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -816,
        16
      ],
      "id": "dab652d8-f4a6-413f-96db-073a801fe7ae",
      "name": "When chat message received",
      "webhookId": "c446a2d0-088a-4007-9aba-33d10eb1fc18"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "You are an AI Agent responsible for sending emails using two tools:\n1. Google Contacts → Find email addresses from names provided in the chat.\n2. Gmail → Send exactly one email.\n\nRules:\n- Always search Google Contacts for the recipient's email address before attempting to send an email.\n- If no email address is found, politely inform the user instead of sending the email.\n- Once an email address is found, send only one email via Gmail.\n- Never attempt to guess or fabricate an email address.\n- Confirm the recipient and message body with the user before sending.\n- Ensure the email is sent only once per request (no duplicates).\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -608,
        16
      ],
      "id": "cbaf93d6-3975-4046-9f1c-23f51ba9658f",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -848,
        208
      ],
      "id": "001b97a1-a1fe-4855-85c3-136cb7b07c63",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "bYhpCeKrX36H8CKO",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -752,
        208
      ],
      "id": "fa2c86d8-58f8-4dec-803a-e1a689e58946",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "sendTo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('To', ``, 'string') }}",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmailTool",
      "typeVersion": 2.1,
      "position": [
        -624,
        208
      ],
      "id": "f1b45a19-56d3-4d5c-bde1-0627156ce8ac",
      "name": "Send a message in Gmail",
      "webhookId": "c4f1195e-0de7-43ce-8ed7-be4b5097695a",
      "credentials": {
        "gmailOAuth2": {
          "id": "Y0gxXnNhFOfEWDb9",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "limit": 1,
        "fields": [
          "emailAddresses",
          "names",
          "nicknames",
          "phoneNumbers"
        ],
        "useQuery": true,
        "query": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Query', ``, 'string') }}"
      },
      "type": "n8n-nodes-base.googleContactsTool",
      "typeVersion": 1,
      "position": [
        -464,
        224
      ],
      "id": "48d95eda-c450-46c6-8573-b9ed17264947",
      "name": "Get many contacts in Google Contacts",
      "credentials": {
        "googleContactsOAuth2Api": {
          "id": "0xVQUxMhO5C9pzWd",
          "name": "Google Contacts account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Send a message in Gmail": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Get many contacts in Google Contacts": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "5469df4f-d40e-4a15-86dc-3ca2bfc473f2",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "e73e65eb1a5fa48539290c2d6f6ec9c87ed2f61a38e2edc2325b3e089014126a"
  },
  "id": "UGMQApCd4tfWtBlG",
  "tags": []
}